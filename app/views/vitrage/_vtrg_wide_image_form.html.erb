<div class="holder">
  <%= semantic_form_for piece, url: form_url, method: form_method, multipart: true, remote: true do |f| %>
    <%= f.inputs do %>
      <%= f.input :image, hint: (f.object.image.present? ? "Current image:<br>#{image_tag(f.object.image.thumb.url)}".html_safe : nil) %>
      <%= f.input :alt %>
      <%= f.input :caption, input_html: { rows: 2 } %>
      <%= f.input :image_cache, as: :hidden %>
    <% end -%>
    <%= hidden_field_tag :kind, piece.class.name.demodulize, id: nil %>
    <%= hidden_field_tag :owner_type, params[:owner_type], id: nil %>
    <%= hidden_field_tag :owner_id, params[:owner_id], id: nil %>
    <%= f.actions do %>
      <%= f.action :submit, as: :button %>
      <%= f.action :cancel, as: :link %>
    <% end -%>
  <% end -%>
</div>
